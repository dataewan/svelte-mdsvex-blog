<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/svelte-mdsvex-blog/ > <link href=global.css rel=stylesheet> <link href=prism-theme.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=favicon.png rel=icon type=image/png> <link href=client/main.93654367.css rel=stylesheet><link href=client/client.4d51abd3.css rel=stylesheet><link href=client/CanvasComponent.86518bd8.css rel=stylesheet> <script>__SAPPER__={baseUrl:"/svelte-mdsvex-blog",preloaded:[void 0,null,{}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/svelte-mdsvex-blog/service-worker.js');(function(){try{eval("async function x(){}");var main="/svelte-mdsvex-blog/client/client.4d51abd3.js"}catch(e){main="/svelte-mdsvex-blog/client/legacy/client.3dbb3a4e.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/svelte-mdsvex-blog/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <link href=/svelte-mdsvex-blog/client/main.93654367.css rel=preload as=style><link href=/svelte-mdsvex-blog/client/client.4d51abd3.css rel=preload as=style><link href=/svelte-mdsvex-blog/client/CanvasComponent.86518bd8.css rel=preload as=style></head> <body> <div id=sapper> <nav class=svelte-9idte7><ul class=svelte-9idte7><li class=svelte-9idte7><a href=. class=svelte-9idte7>home</a></li> <li class=svelte-9idte7><a href=about class=svelte-9idte7>about</a></li> <li class=svelte-9idte7><a href=blog rel=prefetch class="svelte-9idte7 selected">blog</a></li> <li class=svelte-9idte7><a href=tags rel=prefetch class=svelte-9idte7>tags</a></ul></nav> <main class=svelte-oosp9s><h1>Using d3 components</h1> <img alt="" src=/icons/clock.svg> <time class=svelte-dplvyx datetime=2021-03-06T00:00:00.000Z>2021-03-06</time> <div id=tagheader class=svelte-higkw2><h5>More about</h5></div> <div id=tagcontainer class=svelte-higkw2><span class=svelte-higkw2 id=tag><img alt="" src=/icons/tag.svg> <a href=tags/components>components</a> </span><span class=svelte-higkw2 id=tag><img alt="" src=/icons/tag.svg> <a href=tags/d3>d3</a> </span><span class=svelte-higkw2 id=tag><img alt="" src=/icons/tag.svg> <a href=tags/introduction>introduction</a> </span></div> <article class=svelte-6duxay id=article><p>One thing that’s exciting about svelte over other frameworks is that there’s no <a href=https://reactjs.org/docs/faq-internals.html rel=nofollow>virtual DOM</a> to deal with. This means it should be easier to use libraries like <a href=https://d3js.org/ rel=nofollow>d3</a> for data visualisation. It wasn’t possible for me to create a reactive, animated force directed chart in react for example.</p> <h1>References</h1> <p>I’ve found a few good references on how to make these sorts of interactive visualisation components.</p> <p><a href="https://www.youtube.com/watch?v=bnd64ZrHC0U" rel=nofollow>Matthias Stahl</a> has a nice talk about using d3 and svelte for what each of them are good at.</p> <table><thead><tr><th>Svelte</th> <th>d3</thead> <tr><td>DOM manipulation</td> <td>Scales</tr> <tr><td>Component style</td> <td>Shapes</tr> <tr><td>Actions</td> <td>Interpolations</tr> <tr><td>Transitions</td> <td></table> <p><a href=https://svelte.recipes/ rel=nofollow>Amelia Wattenberger’s svelte recipes site</a> is brilliant.</p> <p>There’s also the <a href=https://github.com/Rich-Harris/pancake rel=nofollow>pancake</a> library from the maker of svelte. It tries to make interactive charts that don’t need javascript. It doesn’t use d3 but takes some inspiration from that library.</p> <p>So there are lots of different ways to create these components.</p> <h1>Examples</h1> <h2>Reactive component</h2> <p>I’ve got a <code>textarea</code> here with the value bound to <code>rawdata</code>.</p> <div><textarea rows=5>2
3
54</textarea></div> <p>Adding new numbers here, or deleting numbers, causes updates in the chart below. The <code>rawdata</code> is passed into <code>ReactiveComponent</code> as props, which has a lot of <a href=https://svelte.dev/tutorial/reactive-declarations rel=nofollow>reactive declarations</a> for things like the d3 linear scales for x and y. Then a svelte <code>each</code> block draws a svg rectangle for each of the datapoints. I’ve also put a svelte transition in as well.</p> <svg height=400 width=500><g transform="translate(20 20)"><rect fill=#00bed1 height=10 width=17.037037037037035 x=0 y=360></rect><rect fill=#00bed1 height=10 width=25.555555555555554 x=0 y=240.00000000000003></rect><rect fill=#00bed1 height=10 width=460 x=0 y=120.00000000000001></rect></g></svg> <h2>Drawing on the canvas</h2> <p>You can also use components that draw on the canvas. Useful for performance reasons.</p> <canvas class=svelte-1lkeucb height=500 width=500></canvas> <hr> <p>Next: <a href=blog/styling>Styling the blog</a></article></main></div> 